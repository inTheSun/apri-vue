/**
* vue-memory-router v0.0.1
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.VueNavigation=n()}(this,function(){"use strict";function h(t,n){if(!isArray(t)||!t.length)return!1;for(var e=0,i=t.length;e<i;e++)if(t[e]===n)return t.splice(e,1)}function l(t,n,e,i){var o=t[n];!o||i&&o.tag===i.tag||o.componentInstance.$destroy(),t[n]=null,h(e,n)}["Number","String","Function","Array","Object","Date","Boolean"].forEach(function(t,n){var e;e="[object "+t+"]",window["is"+t]=function(t){return Object.prototype.toString.call(t)===e}});return{install:function(t){t.component("memoryRouter",{name:"memoryRouter",abstract:!0,props:{max:[String,Number]},computed:{},data:function(){return{isRepaint:!1}},watch:{},deactivated:function(){this.isRepaint=!0},created:function(){this.cache=Object.create(null),this.keys=[],this.maxInt=Math.min(Math.max(parseInt(this.max)||6,6),20)},destroyed:function(){for(var t in this.cache)l(this.cache,t,this.keys)},render:function(t){if(this.isRepaint&&this.$vnode.data.keepAlive)return this.isRepaint=!1,null;var n=void 0,e=function(t){for(;t=t.parent;)if("transition"===t.componentOptions.tag)return t;return null}(this.$vnode);if(e&&(n=e.componentInstance)&&"out-in"===n.mode&&n._leaving)return null;var i,o=this.$slots.default,a=null;if(isArray(o)){var r=(a=o.find(function(t){if(isObject(t)&&(isObject(t.componentOptions)||t.isComment&&t.asyncFactory))return!0}))&&a.componentOptions;if(r){(i=r)&&(i.Ctor.options.name||i.tag);var c=this.cache,s=this.keys,u=(null==a.key?r.Ctor.cid+(r.tag?"::"+r.tag:""):a.key)+"-pageKey-"+(history.state&&history.state.key);c[u]?(console.log("use cache!"),a.componentInstance=c[u].componentInstance,h(s,u),s.push(u)):(console.log("add cache!"),c[u]=a,s.push(u),this.maxInt&&s.length>this.maxInt&&(console.log("limit cache!"),l(c,s[0],s,this._vnode))),a.data.keepAlive=!0}}return a||o&&o[0]}})}}});